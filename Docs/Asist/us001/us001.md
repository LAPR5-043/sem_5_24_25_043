# US001 Como administrador do sistema quero alterar a informação apresentada no terminal do sistema Linux antes de me autenticar, alterando a informação por omissão por uma mais criativa que contenha obrigatoriamente a data e o número de utilizadores ativos. 

## Passos a seguir


### 1) Editar a mensagem a apresentar 
    Como queremos manipular informação dinâmica, (data e nº de utilizadores ativos), necessitamos de um script que irá correr em cada conexão via ssh.
    Desta forma iremos utilizar o seguinte script, conseguindo extratir do sistema as informações referentes à data e nº de utilizadores ativos, sendo que estes são distiguidos por terem a /bin/bash shell.
    Devemos também colocar este script no seguinte caminho
    #### /etc/ssh/display_info.sh

    #!/bin/bash

    # Certificar que limpamos o ficheiro
    > /etc/ssh/banner.txt
    > /etc/issue

    # Obter a data atual
    DATE=$(date "+%Y-%m-%d %H:%M:%S")

    # Obter o número de users ativos (example: users with /bin/bash shell)
    ACTIVATED_USERS=$(grep -c '/bin/bash' /etc/passwd)

    # Criar a mensagem do banner
    BANNER_MESSAGE=$(cat <<EOF
    ========================================
    Welcome to the server!
    Please respect the rules!
    Never share your password with anyone!
    Current Date: $DATE
    Number of Activated Users: $ACTIVATED_USERS
    ========================================
    EOF
    ) 

    {
    echo "$BANNER_MESSAGE"
    } > /etc/ssh/banner.txt 


    {
    echo "$BANNER_MESSAGE"
    } > /etc/issue


    # Certificar que temos permisssões para escrever 
    chmod 644 /etc/ssh/banner.txt 
    chmod 644 /etc/issue


### 2.1) Ativar a apresentação do banner no ssh
    Como podemos ver pelo script anteriormente apresentado, para apresentar a mensagem produzida pelo script, iremos redirecionar o stdout para o ficheiro /etc/ssh/banner.txt, pois irá ser a partir da utilização de banner que iremos apresentar as informações pedidas. Para ativarmos o banner, temos de ir ao ficheiro /etc/ssh/sshd_config e alterar a opção do banner para a seguinte:
####
    Banner /etc/ssh/banner.txt

### 2.2) Redirecionar também o output do script para o /etc/issue
    De forma a quem está a aceder à maquina localmente também ter acesso a estas informações, redirecionamos o output do script também para o ficheiro /etc/issue, que vai fazer com que esta informação seja passada também para o utilizador local.



### 3) Colocar o script em execução automática 
    Para termos sempre a informação atualizada, temos de fazer com que o script esteja constantemente a ser executado, para tal, utilizamos o 
    Crontab. O Crontab é um serviço que nos ajuda a agendar a execução de determinada ação, explicitando a rotina de execução na sua tabela, da seguinte forma:
####
    root@debian:/# crontab -e

    De seguida iremos adicionar a linha a indicar a execução constante, ao segundo, do scrip, adicionando a seguinte linha e salvando de seguida:

    * * * * * /etc/ssh/banner.txt

### 4) Reiniciar o serviço de SSH 
    De forma a consumir as alterações feitas, devemos reiniciar o SSH com o seguitne comando:
####
    root@debian:/# sudo systemctl restart sshd
