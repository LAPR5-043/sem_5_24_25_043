# US001 As the system administrator I want to change the information displayed on the Linux system terminal before logging in, by changing the default information for a more creative one that must contain the date and number of active users.


### 1) Edit the message to be displayed
   Since we want to manipulate dynamic information (date and number of active users), we need a script that will run with each SSH connection. In this way, we will use the following script, extracting from the system the relevant information about the date and the number of active users, who are distinguished by having the `/bin/bash` shell.
   We should also place this script in the following path:
#### /etc/ssh/display_info.sh

    #!/bin/bash

    # Certificar que limpamos o ficheiro
    > /etc/ssh/banner.txt
    > /etc/issue

    # Obter a data atual
    DATE=$(date "+%Y-%m-%d %H:%M:%S")

    # Obter o n√∫mero de users ativos (example: users with /bin/bash shell)
    ACTIVATED_USERS=$(who | wc -l)

    # Criar a mensagem do banner
    MESSAGE=$(cat <<EOF
    ==============================================
    Hello mate, It seems that you are new here
    If you want to explore the system, you will
        need to login first. Enjoy your stay!

        Remember, you are not alone here!
        Respect the others and have fun!
    ==============================================

    üìÖ Date and Time:     $CURRENT_DATE


    How many nerds you can meet right now:

    üë• Logged In Users:   $ACTIVATED_USERS

    ==============================================
    EOF
    )

    # Certificar que temos permisss√µes para escrever 
    chmod 644 /etc/ssh/banner.txt
    chmod 644 /etc/issue

    {
    echo -e "$MESSAGE" | /usr/games/cowsay -W 46 -n -f tux
    } > /etc/ssh/banner.txt 


    {
    echo -e "$MESSAGE" | /usr/games/cowsay -W 46 -n -f tux
    } > /etc/issue


### 2.1) Enable banner display in SSH
As we can see from the script presented earlier, to display the message produced by the script, we will redirect the stdout to the /etc/ssh/banner.txt file. This is because, by using the banner option, we will display the requested information. To enable the banner, we must go to the /etc/ssh/sshd_config file and change the banner option to the following:
####
    Banner /etc/ssh/banner.txt

### 2.2) Redirect the script's output to /etc/issue as well
So that those accessing the machine locally also have access to this information, we redirect the script's output to the /etc/issue file, which will ensure this information is also presented to the local user.


### 3) Set the script to run automatically
To always have updated information, we need to make sure the script is constantly running. For that, we will use Crontab. Crontab is a service that helps us schedule the execution of a specific action by specifying the routine in its table, as follows:
####
    root@debian:/# crontab -e

Then, we will add the line that indicates the script will run every second by adding the following line and saving it:

    * * * * * /etc/ssh/banner.txt

### 4) Give execution permissions to the script file
For the file to run, it needs the appropriate permissions, which can be given with the following command:
####
    root@debian:/# chmod +x /etc/ssh/display_info.sh

### 5)  Restart the SSH service
To apply the changes made, we should restart the SSH service with the following command:
####
    root@debian:/# sudo systemctl restart sshd
