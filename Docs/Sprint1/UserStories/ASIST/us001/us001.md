# US001 As the system administrator I want to change the information displayed on the Linux system terminal before logging in, by changing the default information for a more creative one that must contain the date and number of active users.


### 1) Edit the message to be displayed
   Since we want to manipulate dynamic information (date and number of active users), we need a script that will run with each SSH connection. In this way, we will use the following script, extracting from the system the relevant information about the date and the number of active users, who are distinguished by having the `/bin/bash` shell.
   We should also place this script in the following path:
#### /etc/ssh/display_info.sh

    #!/bin/bash

    # Certificar que limpamos o ficheiro
    > /etc/ssh/banner.txt

    # Obter a data atual
    DATE=$(date "+%Y-%m-%d %H:%M:%S")

    # Obter o nÃºmero de users ativos (example: users with /bin/bash shell)
    ACTIVATED_USERS=$(who | wc -l)

    # Criar a mensagem do banner
    MESSAGE=$(cat <<EOF
    ==============================================
    Hello mate, It seems that you are new here
    If you want to explore the system, you will
        need to login first. Enjoy your stay!

        Remember, you are not alone here!
        Respect the others and have fun!
    ==============================================

    ðŸ“… Date and Time:     $CURRENT_DATE


    How many nerds you can meet right now:

    ðŸ‘¥ Logged In Users:   $ACTIVATED_USERS

    ==============================================
    EOF
    )

    # Certificar que temos permisssÃµes para escrever 
    chmod 644 /etc/ssh/banner.txt

    {
    echo -e "$MESSAGE" | /usr/games/cowsay -W 46 -n -f tux
    } > /etc/ssh/banner.txt 



### 2.1) Enable banner display in SSH
As we can see from the script presented earlier, to display the message produced by the script, we will redirect the stdout to the /etc/ssh/banner.txt file. This is because, by using the banner option, we will display the requested information. To enable the banner, we must go to the /etc/ssh/sshd_config file and change the banner option to the following:
####
    Banner /etc/ssh/banner.txt

### 2.2) Enable the message in local user
If you are acessing the machine locally, it is way more easy to show a dinamic message, if you write a message in the file /etc/issue.net, using, for example, \d for date, \t for time, and \u for current logged in users, it will automatically generate the data in your message, and it will be showed to the local user.

    ________________________________________________
    / ============================================== \
    |   Hello mate, It seems that you are new here.  |
    |   If you want to explore the system, you will  |
    |      need to login first. Enjoy your stay!     |
    |                                                |
    |                                                |
    |       Remember, YOU ARE NOT ALONE HERE!        |
    |       Respect the others and have fun!         |
    | ============================================== |
    |                                                |
    |   ðŸ“… Date and Time:     \d \t                  |
    |                                                |
    |                                                |
    |   How many nerds you can meet right now:       |
    |                                                |
    |   ðŸ‘¥ Logged In Users:   \u                     |
    |                                                |
    \ ============================================== /
    ------------------------------------------------
        \
         \
          \
            .--.
           |o_o |
           |:_/ |
          //   \ \
         (|     | )
        /'\_   _/`\
        \___)=(___/    

After you edit the /etc/issue.net file, you just need to save it and the local user will see it.

### 3) Set the script to run automatically
To always have updated information, we need to make sure the script is constantly running. For that, we will use Crontab. Crontab is a service that helps us schedule the execution of a specific action by specifying the routine in its table, as follows:
####
    root@debian:/# crontab -e

Then, we will add the line that indicates the script will run every second by adding the following line and saving it:

    * * * * * /etc/ssh/banner.txt

### 4) Give execution permissions to the script file
For the file to run, it needs the appropriate permissions, which can be given with the following command:
####
    root@debian:/# chmod +x /etc/ssh/display_info.sh

### 5)  Restart the SSH service
To apply the changes made, we should restart the SSH service with the following command:
####
    root@debian:/# sudo systemctl restart sshd
