# US 002 - Administra√ß√£o de Sistemas


## 1. Context

This task is a new feature being developed for the first time. The goal is to enhance the user experience by providing a personalized welcome message upon successful login to the Linux terminal.

## 2. Requirements


**US ASIST-002** Como administrador do sistema quero alterar a informa√ß√£o apresentada no terminal do sistema Linux ap√≥s me autenticar, alterando a informa√ß√£o por omiss√£o por uma mais criativa que contenha obrigatoriamente a data e o nome do utilizador

**Acceptance Criteria:**

- ASIST-002.1. The system shall present a welcome message with the user name and the current date.
- ASIST-002.2. The message shall be displayed in the terminal after the user logs in.


**Dependencies/References:**

*N/A*

## 3. Analysis

### 3.1. Requirement

The system shall present a welcome message with the user name and the current date after the user logs in. This message should be displayed in the terminal after the user logs in. The message should be displayed in a creative way, with the user name and the current date.

### 3.2. Research

After some research, there are two main ways to implement this feature: using **`/etc/motd`** or **`/etc/profile`**.

#### 3.2.1. What is `/etc/motd`?

The **`/etc/motd`** (Message of the Day) file is a static or dynamically generated file that displays a message to users immediately after they log in. This message is shown before any shell session is started. It is often used for system-wide notifications or welcome messages. Modern Linux systems may generate the content of `/etc/motd` dynamically using scripts located in **`/etc/update-motd.d/`**, allowing more customization.

However, **`/etc/motd`** only displays text and doesn‚Äôt have the ability to execute commands or scripts directly to modify the shell environment or provide dynamic outputs such as the current user‚Äôs name or the date.

#### 3.2.2. What is `/etc/profile`?

The **`/etc/profile`** file is a global configuration file used for defining system-wide environment variables and startup scripts that run for all users when they log in. It is executed every time a user initiates a **login shell** (e.g., SSH or terminal login).

Unlike `/etc/motd`, the **`/etc/profile`** file can execute shell commands and scripts, making it possible to display dynamic messages, such as the current user‚Äôs name or the system date and time. This file also allows for more advanced shell configurations and environment setups.

#### 3.2.3. Difference between `/etc/motd` and `/etc/profile`

The key differences between **`/etc/motd`** and **`/etc/profile`** are:

- **`/etc/motd`** displays a static or dynamically generated message immediately after login. It‚Äôs simple and only shows text, without the ability to execute shell commands dynamically for each user.
- **`/etc/profile`** is used for system-wide configuration and can execute scripts, making it more flexible for displaying dynamic messages that include real-time data, such as the user‚Äôs name and the current date.

### 3.3. Decision

Based on the requirement that the message should display dynamic information like the user‚Äôs name and the current date after login, it was decided to use the **`/etc/profile`** file. This approach ensures the message is dynamic and meets the need for customization at each login session.

## 4. Implementation

### 4.1. Script Creation

First, we need to create a script that displays the required information after a user logs in. The script can be found [here](./login_display_allUsers.sh).

### 4.2. Adding the Script

Next, we add the created script to the `/etc/profile.d` directory. This step is crucial to avoid polluting the `/etc/profile` file.

```bash

touch /etc/profile.d/login_display_allUsers.sh

nano /etc/profile.d/login_display_allUsers.sh (paste the script content)

```

### 4.3. Granting Execution Permissions

After adding the script file, we need to grant it execution permissions. This step ensures that the script can run successfully.

```bash

chmod +x /etc/profile.d/login_display_allUsers.sh

```

### 4.4. Utilizing `/etc/profile`

The `/etc/profile` file already contains a line that sources all scripts in the `/etc/profile.d` directory. Therefore, by placing our script in this directory, we ensure it is executed upon user login.

## 5. Integration/Demonstration

To demonstrate the feature, we will log in as a user and observe the welcome message displayed in the terminal.

```bash

asist@10.9.10.43's password:
Linux debian 5.10.0-32-amd64 #1 SMP Debian 5.10.223-1 (2024-08-10) x86_64

Last login: Thu Oct  3 16:44:07 2024

 _______________________________________________________
/ ==============================================        \
|            Welcome, asist!                            |
| ==============================================        |
|                                                       |
|   üìÖ Date and Time:     03/10/2024 18:15:08           |
|   üîë Last Login:        Thu Oct 3 18:15:07 +0100 2024 |
|   ‚è≥ Uptime:            up 1 hour, 31 minutes         |
|                                                       |
|   üìä System Load:       0.00, 0.00, 0.00              |
|   üíæ Disk Usage:        26% used, 5.2G available      |
|   üß† Memory Usage:      74Mi used, 781Mi available    |
|                                                       |
|   üë• Logged In Users:   2                             |
|   üåê IP Address:        10.9.10.43                     |
|                                                       |
\ ==============================================        /
 -------------------------------------------------------
   \
    \
        .--.
       |o_o |
       |:_/ |
      //   \ \
     (|     | )
    /'\_   _/`\
    \___)=(___/

asist@debian:~$

```


## 6. Observations

This feature is presented to the user only when a login shell is activated. We could have implemented it in the `.bashrc` file, but that would make the message appear every time a new shell is opened, which is not the desired behavior.

So, when a user changes from one user to another after logging in, this feature will not be triggered. This is because the `/etc/profile` file is only executed when a login shell is activated.