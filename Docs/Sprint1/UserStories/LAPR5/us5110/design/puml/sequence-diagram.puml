@startuml
title Sequence Diagram 
skinparam classAttributeIconSize 0

skinparam class {
    LifeLineBorderColor DodgerBlue
    LifeLineBackgroundColor APPLICATION
    BackgroundColor LemonChiffon
    ArrowColor Brown
    BorderColor SaddleBrown
}

skinparam packageStyle rectangle

skinparam card {
    LifeLineBorderColor DodgerBlue
    LifeLineBackgroundColor APPLICATION
    BackgroundColor LemonChiffon
    ArrowColor Brown
    BorderColor SaddleBrown
}

actor Admin
participant "Route" as UI
participant "PatientController" as Controller
participant "PatientService" as userS
participant "PatientRepository" as userR
participant "LogService" as LogS
participant "LogRepository" as LogR
participant "Patient" as user
database "DataBase" as db

activate Admin
Admin -> UI: HttpDelete("{id}")
activate UI
UI -> Controller:DeletePatientAsync(id, adminEmail)
activate Controller
Controller -> userS : UpdateIsActiveAsync(id, adminEmail)
activate userS
userS -> userR : GetByIdAsync(id)
activate userR 
userR -> db : getById(id)
activate db
db --> userR: patient
deactivate db
userR --> userS: patient
deactivate userR

deactivate user
userS--> userR: Remove(patient)
activate userR
userR -> db : Remove(patient)
activate db
db --> userR 
deactivate db
userR --> userS
deactivate userR
userS --> LogS : CreateLogAsync(log, adminEmail)
activate LogS 
LogS --> LogR : AddAsync(log)
activate LogR 
LogR -> db : add(log)
activate db 
db --> LogR 
deactivate db
LogR --> LogS 
deactivate LogR
LogS --> userS 
deactivate LogS
userS --> Controller : true
deactivate userS 
Controller --> UI : true
deactivate Controller 
UI --> Admin : true
deactivate UI
deactivate Admin
















@enduml